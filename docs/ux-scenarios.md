
# **Детальные UX-сценарии для Sleep Tracking Application**

---

## **Регистрация пользователя**

**Happy Path**
**Пользовательский контекст:** Новый пользователь хочет создать аккаунт и начать отслеживать сон.

| Шаг | Действие                                      | Системный ответ                                                              | Микроинтеракции    / LLM                                                  |
| --- | --------------------------------------------- | ---------------------------------------------------------------------------- | ------------------------------------------------------------------ |
| 1   | Открывает страницу регистрации                | Показывает форму с полями: имя, email, пароль, пол, рост, вес, дата рождения | Плавная анимация появления полей                                   |
| 2   | Вводит данные и нажимает "Зарегистрироваться" | Валидирует email, пароль и обязательные поля                                 | Валидация в реальном времени: зеленая галочка при корректном вводе |
| 3   | Успешная регистрация                          | Перенаправление на страницу входа                                            | Плавный переход                                     |

**Edge Cases**

* **Автоматический вход:** если сессия активна, мгновенный redirect в ЛК
* **Повторная регистрация:** Toast-уведомление "Аккаунт уже существует" + redirect на вход

**Ошибки**

* **Некорректный email:** показать ошибку, предложить исправить
* **Слабый пароль:** отобразить требования к паролю
* **Технический сбой:** сообщение об ошибке
* **Проблема с редиректом:** уведомление с инструкцией обновить страницу

---

## **Вход в личный кабинет**

**Happy Path**
**Пользовательский контекст:** Пользователь хочет безопасно войти в ЛК.

| Шаг | Действие              | Системный ответ                     | Микроинтеракции      / LLM                                              |
| --- | --------------------- | ----------------------------------- | ---------------------------------------------------------------------- |
| 1   | Вводит логин и пароль | Валидация введённых данных          | Индикация ошибок в реальном времени (красная рамка при неверном вводе) |
| 2   | Нажимает "Войти"      | Проверка учётной записи             | Индикатор загрузки "Проверяем данные..."                               |
| 3   | Успешный вход         | Перенаправление на главную страницу | Плавный переход                                              |

**Edge Cases**

* Некорректные данные: сообщение об ошибке и возможность повторного ввода


**Ошибки**

* **Технический сбой сервера:** предложение повторить позже
* **Учётная запись отсутствует:** сообщение о необходимости регистрации

---

## **Восстановление аккаунта**

**Happy Path**
**Пользовательский контекст:** Пользователь забыл пароль и хочет восстановить доступ.

| Шаг | Действие                           | Системный ответ                      | Микроинтеракции   / LLM               |
| --- | ---------------------------------- | ------------------------------------ | ----------------------------------- |
| 1   | Запрашивает восстановление         | Показывает форму ввода email         | Подсказка формата email             |
| 2   | Система отправляет ссылку на email | Toast: "Проверьте вашу почту"        | Появления сообщщение о том, что сообещение на Email было отправленно      |
| 3   | Пользователь переходит по ссылке   | Показывает форму ввода нового пароля | Валидация пароля в реальном времени |
| 4   | Новый пароль принят                | Подтверждение успешного обновления   | Зеленый toast с иконкой ✓           |

**Edge Cases**

* Email не зарегистрирован: показать ошибку
* Просроченная ссылка: предложение запросить новую

**Ошибки**

* **Технический сбой:** уведомление + повторная попытка
* **Лимит восстановления:** уведомление о превышении
* **Ошибка верификации нового пароля:** показать требования к паролю

---

## **Загрузка данных о сне**

**Happy Path**
**Пользовательский контекст:** Загружает CSV с устройства для анализа сна.

| Шаг | Действие                            | Системный ответ                   | Микроинтеракции   / LLM           |
| --- | ----------------------------------- | --------------------------------- | ------------------------------- |
| 1   | Загружает CSV                       | Валидация формата и структуры     | Подсветка ошибок, подсказки     |
| 2   | Система сохраняет корректные данные | Toast: "Данные успешно загружены" | Анимация уведомления    |
| 3   | Обновление профиля с новыми данными | Расчёт метрик сна                 | Progress bar + skeleton screens |

**Edge Cases**

* Дубликаты: игнорирование
* Неверный формат CSV: сообщение об ошибке

**Ошибки**

* **Сбой синхронизации:** автоматический повтор
* **Некорректные данные:** подсказка исправления
* **Превышение лимитов CSV:** обрезка/агрегация данных

---

## **Просмотр текущего состояния сна**

**Happy Path**

| Шаг | Действие                        | Системный ответ                                   | Микроинтеракции / LLM                          |
| --- | ------------------------------- | ------------------------------------------------- | -------------------------------------------- |
| 1   | Пользователь выбирает период    | Система готовит агрегированные показатели         | Skeleton screens                             |
| 2   | Просмотр графиков и метрик      | Отображение эффективности, фаз сна, качества, BMR | Интерактивные  графики               |


**Edge Cases**

* Недостаточно данных: показать частичный обзор + рекомендации
* Слишком большой период: предложить укрупнённый обзор

**Ошибки**

* **Временная недоступность:** показать последний сохранённый обзор
* **Неверный период:** автоматическая корректировка периода
* **Превышение лимитов точек графика:** агрегирование данных

**LLM Touchpoints**

* Для метрик сна модель 1 оценивает качество сна и формирует текстовую сводку
* Модель 2 генерирует персональные рекомендации на основе последних 7 дней

---

## **Просмотр истории сна**

**Happy Path**

| Шаг | Действие                           | Системный ответ                          | Микроинтеракции / LLM                        |
| --- | ---------------------------------- | ---------------------------------------- | -------------------------------------------- |
| 1   | Выбор периода (неделя/месяц)       | Система отображает все записи за период  | Hover-эффекты на карточках, fade-in графиков |
| 2   | Просмотр статистики по каждой ночи | Интерактивные графики с фазами и пульсом | Подсказка с деталями по ночи                   |

**Edge Cases**

* Нет данных: сообщение "Нет данных за выбранный период"

**Ошибки**

* **Технический сбой:** повтор запроса
* **Превышение времени отклика:** предложить уменьшить период

---

## **Просмотр хронотипа**

**Happy Path**

| Шаг | Действие                 | Системный ответ                              | Микроинтеракции / LLM                                |
| --- | ------------------------ | -------------------------------------------- | ---------------------------------------------------- |
| 1   | Запрос анализа хронотипа | Расчёт на основе 7+ ночей                    | Skeleton screen + ajax ответ как только расчёт будет выполнен                      |
| 2   | Просмотр результатов     | Отображение типа хронотипа, BMR, калорий сна | Анимация графиков, подсветка рекомендуемого окна сна |

**Edge Cases**

* Недостаточно дней для анализа: уведомление о невозможности определить хронотип 
* Отсутствует текстовое описание хронотипа: уведомление "Описание недоступно"

**Ошибки**

* **Технический сбой:** повторный запрос
* **Превышение лимитов данных:** анализ по последним 7 записям с уведомлением


---

## **Микроинтеракции и обратная связь для всего приложения**

* **Уведомления:**

  * Success: зеленый toast с ✓
  * Warning: желтый toast с ⚠
  * Error: красный toast с ✗ и кнопкой "Повторить"
* **Состояния загрузки:** Skeleton screens, Progress bars, Optimistic updates
* **Визуальные переходы:** fade-in/out страниц, slide анимации для модальных окон
* **Графики:** плавное обновление графиков, интерактивные tooltips

