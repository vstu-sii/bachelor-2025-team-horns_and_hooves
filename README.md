# SleepRecomendations AI

Персонализированная система анализа и улучшения качества сна с использованием AI. Приложение помогает отслеживать сон, анализировать его качество и получать персональные рекомендации для улучшения отдыха.

## Быстрый старт

### Предварительные требования

- Python 3.10+
- PostgreSQL 13+
- Redis 6+
- Node.js 16+ (для фронтенд ассетов)

### Установка и запуск

1. **Клонируйте репозиторий:**

   ```bash
   git clone <repository-url>
   cd sleepproject
   ```

2. **Установите зависимости:**

   ```bash
   poetry install
   ```

3. **Настройте окружение:**

   ```env
   DJANGO_SECRET_KEY=
   DEBUG=
   BD_NAME=
   BD_USER=
   BD_PASSWORD=
   CELERY_BROKER_URL=
   STATIC_ROOT=
   MEDIA_ROOT=
   GEMINI_API_KEY=
   GEMINI_MODEL=
   LANGFUSE_PUBLIC_KEY=
   LANGFUSE_SECRET_KEY=
   LANGFUSE_HOST=
   BASELINE_MAX_RETRIES=
   BASELINE_RETRY_DELAY=
   ```

4. **Настройте базу данных и запустите:**

   ```bash
   python manage.py migrate
   python manage.py runserver
   ```

5. **Запустите Celery worker (в отдельном терминале):**

   ```bash
   celery -A sleepproject worker -l info
   ```

### Тестирование

```bash
python manage.py test
```

---

## Технологический стек

### Backend

- **Python 3.10+** — Основной язык программирования
- **Django 4.2.11** — Веб-фреймворк
- **Celery** — Асинхронная очередь задач
- **Redis** — Брокер сообщений и кэш
- **PostgreSQL** — База данных
- **Gunicorn** — WSGI сервер

### Frontend

- **HTML5, CSS3, JavaScript** — Базовые технологии
- **Bootstrap 5** — Адаптивный дизайн
- **Highcharts.js** — Интерактивная визуализация данных
- **jQuery** — Манипуляции с DOM и AJAX

### Инструменты разработки

- **Poetry** — Управление зависимостями
- **Docker** — Контейнеризация
- **Django Debug Toolbar** — Отладка в разработке


---

## Команда проекта

| Роль | Ответственный |
|------|---------------|
| **System Architect / Product Owner (SA/PO)** | Карпов А. В. |
| **AI Engineer** | Таранов В. С. |
| **MLOps/DevOps Engineer** | Тихинов Д. А. |
| **Fullstack Developer** | Васильев П. Д. |

---

## Сегменты пользователей

- **Люди среднего возраста** (35-55 лет, испытывают проблемы со сном из-за изменения биоритмов)
- **Пожилые люди** (60+ лет, качество сна ухудшается с возрастом)
- **Спортивные люди** (20-50 лет, хотят оптимизировать циклы сна для восстановления после тренировок)

---

## Pain points

- **Низкое качество сна**: Проблемы с засыпанием, ночные пробуждения, недосыпание.
- **Нарушение биоритмов**: Плохое восприятие дневной активности из-за недостаточного или неэффективного сна.
- **Высокий уровень стресса и тревожности**: Нарушение качества сна из-за психологического напряжения, стресса, беспокойства.

---

## Use-cases

### UC-1. Регистрация

**Акторы:** Пользователь.

**Предусловия:**

- Пользователь ещё не зарегистрирован в системе.

**Триггер:** Пользователь инициирует процесс регистрации.

### UC-2. Вход в личный кабинет

**Акторы:** Пользователь.

**Предусловия:**

- Пользователь зарегистрирован в системе.

**Триггер:** Пользователь вводит данные для входа.

### UC-3. Восстановление аккаунта

**Акторы:** Пользователь.

**Предусловия:**

- Пользователь забыл пароль.

**Триггер:** Пользователь инициирует восстановление пароля.

### UC-4. Загрузка данных

**Акторы:** Пользователь (основной), Устройство-трекер (внешний источник данных).

**Предусловия:**

- Пользователь зарегистрирован и авторизован.
- Устройство синхронизировано и готово для передачи данных.

**Триггер:** Пользователь запрашивает загрузку данных о сне.

### UC-5. Просмотр текущего состояния сна

**Акторы:** Пользователь.
**Предусловия:**

- Пользователь зарегистрирован и авторизован.
- За выбранный период есть данные/агрегаты.
- Система доступна для запросов пользователя.

**Триггер:** Пользователь запрашивает статистику за период.

### UC-6. Просмотр истории сна

**Акторы:** Пользователь.

**Предусловия:**

- Пользователь зарегистрирован и авторизован.
- Доступны записи сна за выбранный период.

**Триггер:** Пользователь запрашивает историю сна.

### UC-7. Просмотр хронотипа

**Акторы:** Пользователь.

**Предусловия:**

- Пользователь зарегистрирован и авторизован.
- Антропометрия заполнена при регистрации и валидна (вес, рост, дата рождения → возраст, пол).
- В наличии записи сна за ≥7 дней; для корректной оценки середины сна предпочтительны «свободные дни».
- Система доступна для запросов пользователя.

**Триггер:** Пользователь запрашивает анализ хронотипа и метаболизма.

---

## Value proposition

Персонализированные рекомендации, основанные на анализе ваших уникальных данных (сон, активность, привычки) с помощью ИИ. Мы отвечаем не на вопрос "Как я спал?", А на вопрос "Что мне сделать сегодня, чтобы завтра выспаться?".

---

## North Star Metric

Ключевой показатель качества сна (рассчитываемый по формуле на основе продолжительности, эффективности и соотношения фаз) стабильно улучшается или остается стабильно высоким (выше персонального порога) в течение 1 недели.

---

## Документация

Полная документация проекта доступна в папке [`/docs`](./docs/):

- [Архитектура системы](./docs/architecture/)
- [API документация](./api/)

---
